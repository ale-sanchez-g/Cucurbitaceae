--- 
reset_minion: true

# Build Environment
build_environment: Ubuntu 16.04

# Create directories for test and coverage reports
before_script:
  - mkdir -p shippable/testresults
  - mkdir -p shippable/codecoverage

integrations: 
  hub: 
    - integrationName: AlejandroPrivate
      type: docker
build:
  ci:
    - docker ps -a
    - docker run --name db-container -e MYSQL_ROOT_HOST=% -e MYSQL_ROOT_PASSWORD=root -d mysql/mysql-server:5.7
    - docker run --name report-container -d --link db-container:db -p 80:80 morsisdivine/cucumber-historical-reports:latest
    - curl --ipv4 http://localhost/historical_report/reports/
  always:  
    - docker stop db-container
    - docker stop report-container
    - docker rm db-container
    - docker rm report-container